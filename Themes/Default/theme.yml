---
start_screen: song-select
scene_stack:
  song-select:
    elements:
      song-title:
        TEXT:
          contents: 0
          x_pos: 0
          y_pos: 0
    on_finish: 999
    on_keypress:
      grave: to-editor
      enter: enter-gameplay
      right: next-song
      left: previous-song
  gameplay:
    elements:
      player-1:
        NOTEFIELD:
          layout: 0
          notes: 0
          draw_distance: 0
      player-2:
        NOTEFIELD:
          layout: 1
          notes: 0
          draw_distance: 0
      music:
        MUSIC:
          rate: 0
          path: 0
      song-title:
        TEXT:
          contents: 0
          x_pos: 1
          y_pos: 2
      score:
        TEXT:
          contents: 0
          x_pos: 1
          y_pos: 3
    on_finish: score-from-replay
    on_keypress:
      esc: to-song-select
      z: update-score
      x: update-score
      comma: update-score
      period: update-score
  results:
    elements:
      final-score:
        TEXT:
          contents: 0
          x_pos: 1
          y_pos: 2
    on_finish: 999
    on_keypress:
      enter: to-song-select
  editor:
    elements:
      placeholder:
        TEXT:
          contents: 1
          x_pos: 1
          y_pos: 1
    on_finish: 999
    on_keypress:
      esc: to-song-select
      grave: to-song-select
scripts:
  scripts:
    score-from-replay:
      - Element:
          resource_index: 0
          element_index: player-1
      - Script:
          resource_type: Replay
          resource_index: 0
          script_index: 0
          destination_type: String
          destination_index: 0
    to-song-select:
      - Message:
          Finish: song-select
    previous-song:
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 4
          destination_type: Integer
          destination_index: 1
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 1
          destination_type: String
          destination_index: 0
      - Method:
          element: song-title
          method: 0
          resource: 0
          resource_type: String
          ret_index: 0
          ret_type: Integer
    next-song:
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 3
          destination_type: Integer
          destination_index: 1
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 1
          destination_type: String
          destination_index: 0
      - Method:
          element: song-title
          method: 0
          resource: 0
          resource_type: String
          ret_index: 0
          ret_type: Integer
    enter-gameplay:
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 7
          destination_type: Path
          destination_index: 0
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 5
          destination_type: Path
          destination_index: 1
      - Script:
          resource_type: Path
          resource_index: 1
          script_index: 6
          destination_type: Notes
          destination_index: 0
      - Message:
          Finish: gameplay
    to-editor:
      - Message:
          Finish: editor
    update-score:
      - Method:
          element: player-1
          method: 0
          resource: 0
          resource_type: Integer
          ret_index: 4
          ret_type: Float
      - Script:
          resource_type: Float
          resource_index: 4
          script_index: 0
          destination_type: String
          destination_index: 2
      - Method:
          element: score
          method: 0
          resource: 2
          resource_type: String
          ret_index: 0
          ret_type: Integer