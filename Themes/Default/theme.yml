---
scene_stack:
  start:
    elements:
      song-title:
        TEXT:
          - 0
          - 0
          - 0
    on_finish: 999
    on_keypress:
      5: to-editor
      1: enter-gameplay
      3: next-song
      2: previous-song
  gameplay:
    elements:
      player-1:
        NOTEFIELD:
          - 0
          - 0
          - 0
      player-2:
        NOTEFIELD:
          - 1
          - 0
          - 0
      music:
        MUSIC:
          - 0
          - 0
      song-title:
        TEXT:
          - 0
          - 1
          - 2
      score:
        TEXT:
          - 0
          - 1
          - 3
    on_finish: score-from-replay
    on_keypress:
      4: to-song-select
      6: update-score
      7: update-score
      8: update-score
      9: update-score
  results:
    elements:
      final-score:
        TEXT:
          - 0
          - 1
          - 2
    on_finish: 999
    on_keypress:
      1: to-song-select
  editor:
    elements:
      placeholder:
        TEXT:
          - 1
          - 1
          - 1
    on_finish: 999
    on_keypress:
      4: to-song-select
      5: to-song-select
scripts:
  scripts:
    score-from-replay:
      - Element:
          resource_index: 0
          element_index: player-1
      - Script:
          resource_type: Replay
          resource_index: 0
          script_index: 0
          destination_type: String
          destination_index: 0
    to-song-select:
      - Message:
          Finish: start
    previous-song:
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 4
          destination_type: Integer
          destination_index: 1
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 1
          destination_type: String
          destination_index: 0
      - Method:
          element: song-title
          method: 0
          resource: 0
          resource_type: String
          ret_index: 0
          ret_type: Integer
    next-song:
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 3
          destination_type: Integer
          destination_index: 1
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 1
          destination_type: String
          destination_index: 0
      - Method:
          element: song-title
          method: 0
          resource: 0
          resource_type: String
          ret_index: 0
          ret_type: Integer
    enter-gameplay:
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 7
          destination_type: Path
          destination_index: 0
      - Script:
          resource_type: Integer
          resource_index: 1
          script_index: 5
          destination_type: Path
          destination_index: 1
      - Script:
          resource_type: Path
          resource_index: 1
          script_index: 6
          destination_type: Notes
          destination_index: 0
      - Message:
          Finish: gameplay
    to-editor:
      - Message:
          Finish: editor
    update-score:
      - Method:
          element: player-1
          method: 0
          resource: 0
          resource_type: Integer
          ret_index: 4
          ret_type: Float
      - Script:
          resource_type: Float
          resource_index: 4
          script_index: 0
          destination_type: String
          destination_index: 2
      - Method:
          element: score
          method: 0
          resource: 2
          resource_type: String
          ret_index: 0
          ret_type: Integer